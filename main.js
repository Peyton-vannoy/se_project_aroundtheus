!function(){"use strict";class e{constructor(e,t,s,i,r){this._name=e.name,this._link=e.link,this._id=e._id,this._isLiked=e.isLiked,this._handleImageClick=s,this._handleDeleteClick=i,this._handleLikeClick=r,this._cardSelector=t}_setEventListeners(){this._likeIcon.addEventListener("click",(()=>{this._handleLikeClick(this)})),this._deleteBtn.addEventListener("click",(()=>{this._handleDeleteClick(this)})),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}setIsLiked(e){this.isLiked=e,this.renderLikes()}renderLikes(){this.isLiked?this._likeIcon.classList.add("card__react-button_active"):this._likeIcon.classList.remove("card__react-button_active")}handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._cardTitleEl.textContent=this._name,this._cardImageEl.src=this._link,this._cardImageEl.alt="Photo of "+this._name,this._likeIcon=this._cardElement.querySelector(".card__react-button"),this._deleteBtn=this._cardElement.querySelector(".card__delete-button"),this.renderLikes(),this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(e){return!e.every((e=>e.validity.valid))}_enableButton(){this._submitBtn.classList.remove(this._inactiveButtonClass),this._submitBtn.disabled=!1}disableButton(){this._submitBtn.classList.add(this._inactiveButtonClass),this._submitBtn.disabled=!0}_toggleButtonState(){this._hasInvalidInput(this._inputEls)?this.disableButton():this._enableButton()}resetValidation(){this._inputEls.forEach((e=>{this._hideInputError(e)})),this._enableButton()}setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitBtn=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault(e)})),this.setEventListeners()}}class s{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{const t=this._renderer(e);this.addItem(t)}))}addItem(e){this._container.prepend(e)}}class i{constructor(e){this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._closeButton=this._popupElement.querySelector(".modal__close-button")}open(){this._popupElement.classList.add("modal_open"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_open"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(e=>{e.target===this._popupElement&&this.close()}))}}class r extends i{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputList=this._popupForm.querySelectorAll(".modal__form-input"),this._submitButton=this._popupForm.querySelector(".modal__save-button")}_getInputValues(){return this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}reset(){this._popupForm&&this._popupForm.reset()}setSubmitButtonText(e){this._submitButton.textContent=e}}const n={formSelector:".modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button-disabled",inputErrorClass:"modal__form_input_type_error",errorClass:"modal__form-input-error-visible"},o=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers}).then(this.checkResponse)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this.checkResponse)}editProfile(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this.checkResponse)}addCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this.checkResponse)}removePlace(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this.checkResponse)}editProfileImage(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.link})}).then(this.checkResponse)}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this.checkResponse)}dislikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this.checkResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"697fd183-9a82-4522-9294-b01c12c32a59","Content-Type":"application/json"}}),a=document.querySelector("#profile-edit-btn"),l=document.querySelector("#profile-title-input"),c=document.forms["profile-form"],h=document.querySelector("#profile-description-input"),d=document.querySelector("#avatar-save-btn"),u=document.forms["update-avatar-form"],_=document.querySelector("#places-add-btn"),m=document.forms["add-place-form"];function p(e){L.open(e)}const v=new t(n,c),f=new t(n,m),b=new t(n,u),E=new r("#profile-edit-modal",(function(e){E.setSubmitButtonText("Saving..."),e.name&&e.about?o.editProfile({name:e.name,about:e.about}).then((e=>{let{name:t,about:s}=e;B.setUserInfo({name:t,about:s}),E.close()})).catch((e=>{console.error("Error updating user info:",e)})).finally((()=>{E.setSubmitButtonText("Save")})):console.error("Please fill in all the fields")})),S=new r("#places-add-modal",(function(e){S.setSubmitButtonText("Saving..."),o.addCard({name:e.name,link:e.link}).then((e=>{let{name:t,link:s,_id:i}=e;I.addItem(g({name:t,link:s,_id:i})),S.close(),S.reset()})).catch((e=>{console.error("Error adding new place:",e)})).finally((()=>{S.setSubmitButtonText("Save")}))})),k=new r("#avatar-update-modal",(function(e){k.setSubmitButtonText("Saving..."),o.editProfileImage(e).then((e=>{B.setUserAvatar(e),k.reset(),k.close(),console.log("Success:",e)})).catch((e=>{console.error("Error updating profile avatar:",e)})).finally((()=>{k.setSubmitButtonText("Save")}))})),L=new class extends i{constructor(e){super(e),this._previewImage=this._popupElement.querySelector(".modal__image-preview"),this._previewTitle=this._popupElement.querySelector(".modal__image-caption")}open(e){this._previewImage.src=e.link,this._previewImage.alt=e.name,this._previewTitle.textContent=e.name,super.open()}}("#places-preview-modal"),C=new class extends i{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitButton=this._popupForm.querySelector(".modal__save-button"),this._handleFormSubmit=t}setSubmitHandler(e){this._handleFormSubmit=e}setSubmitButtonText(e){this._submitButton.textContent=e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()}))}}("#places-delete-modal",y);function y(e){C.open(),C.setSubmitHandler((()=>{C.setSubmitButtonText("Deleting..."),o.removePlace(e._id).then((()=>{e.handleDeleteCard(),C.close()})).catch((e=>{console.error("Error deleting place:",e)})).finally((()=>{C.setSubmitButtonText("Delete")}))}))}function g(t){return new e(t,"#card-template",p,y,q).getView()}let I;E.setEventListeners(),L.setEventListeners(),k.setEventListeners(),S.setEventListeners(),C.setEventListeners(),b.enableValidation(),v.enableValidation(),f.enableValidation(),o.getInitialCards().then((e=>{I=new s({items:e,renderer:e=>g(e)},".cards__list"),I.renderItems()})).catch((e=>console.error(e)));const B=new class{constructor(e){let{profileName:t,profileJob:s,profileAvatar:i}=e;this._profileName=document.querySelector(t),this._profileJob=document.querySelector(s),this._profileAvatar=document.querySelector(i)}getUserInfo(){return{name:this._profileName.textContent,about:this._profileJob.textContent}}setUserInfo(e){let{name:t,about:s}=e;this._profileName.textContent=t,this._profileJob.textContent=s}setUserAvatar(e){let{avatar:t}=e;this._profileAvatar.src=t}}({profileName:".profile__title",profileJob:".profile__description",profileAvatar:".profile__image"});function q(e){e.isLiked&&o.dislikeCard(e._id).then((()=>{e.setIsLiked(!1)})).catch((e=>console.error("Error removing like reaction:",e))),e.isLiked||o.likeCard(e._id).then((()=>{e.setIsLiked(!0)})).catch((e=>console.error("Error adding like reaction:",e)))}o.getUserInfo().then((e=>{B.setUserInfo({name:e.name,about:e.about}),B.setUserAvatar({avatar:e.avatar})})).catch((e=>console.error(e))),a.addEventListener("click",(()=>{const e=B.getUserInfo();l.value=e.name||"",h.value=e.about||"",v.resetValidation(),E.open()})),_.addEventListener("click",(()=>{S.open()})),d.addEventListener("click",(()=>{k.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQWUsTUFBTUEsRUFDbkJDLFdBQUFBLENBQ0VDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEdBRUFDLEtBQUtDLE1BQVFOLEVBQUtPLEtBQ2xCRixLQUFLRyxNQUFRUixFQUFLUyxLQUNsQkosS0FBS0ssSUFBTVYsRUFBS1UsSUFDaEJMLEtBQUtNLFNBQVdYLEVBQUtZLFFBRXJCUCxLQUFLUSxrQkFBb0JYLEVBQ3pCRyxLQUFLUyxtQkFBcUJYLEVBQzFCRSxLQUFLVSxpQkFBbUJYLEVBQ3hCQyxLQUFLVyxjQUFnQmYsQ0FDdkIsQ0FFQWdCLGtCQUFBQSxHQUNFWixLQUFLYSxVQUFVQyxpQkFBaUIsU0FBUyxLQUN2Q2QsS0FBS1UsaUJBQWlCVixLQUFLLElBRTdCQSxLQUFLZSxXQUFXRCxpQkFBaUIsU0FBUyxLQUN4Q2QsS0FBS1MsbUJBQW1CVCxLQUFLLElBRS9CQSxLQUFLZ0IsYUFBYUYsaUJBQWlCLFNBQVMsS0FDMUNkLEtBQUtRLGtCQUFrQixDQUNyQk4sS0FBTUYsS0FBS0MsTUFDWEcsS0FBTUosS0FBS0csT0FDWCxHQUVOLENBQ0FjLFVBQUFBLENBQVdWLEdBQ1RQLEtBQUtPLFFBQVVBLEVBQ2ZQLEtBQUtrQixhQUNQLENBRUFBLFdBQUFBLEdBQ01sQixLQUFLTyxRQUNQUCxLQUFLYSxVQUFVTSxVQUFVQyxJQUFJLDZCQUU3QnBCLEtBQUthLFVBQVVNLFVBQVVFLE9BQU8sNEJBRXBDLENBRUFDLGdCQUFBQSxHQUNFdEIsS0FBS3VCLGFBQWFGLFNBQ2xCckIsS0FBS3VCLGFBQWUsSUFDdEIsQ0FFQUMsT0FBQUEsR0FnQkUsT0FmQXhCLEtBQUt1QixhQUFlRSxTQUNqQkMsY0FBYzFCLEtBQUtXLGVBQ25CZ0IsUUFBUUQsY0FBYyxTQUN0QkUsV0FBVSxHQUNiNUIsS0FBS2dCLGFBQWVoQixLQUFLdUIsYUFBYUcsY0FBYyxnQkFDcEQxQixLQUFLNkIsYUFBZTdCLEtBQUt1QixhQUFhRyxjQUFjLGdCQUNwRDFCLEtBQUs2QixhQUFhQyxZQUFjOUIsS0FBS0MsTUFDckNELEtBQUtnQixhQUFhZSxJQUFNL0IsS0FBS0csTUFDN0JILEtBQUtnQixhQUFhZ0IsSUFBTSxZQUFjaEMsS0FBS0MsTUFDM0NELEtBQUthLFVBQVliLEtBQUt1QixhQUFhRyxjQUFjLHVCQUNqRDFCLEtBQUtlLFdBQWFmLEtBQUt1QixhQUFhRyxjQUFjLHdCQUVsRDFCLEtBQUtrQixjQUNMbEIsS0FBS1kscUJBRUVaLEtBQUt1QixZQUNkLEVDcEVhLE1BQU1VLEVBQ25CdkMsV0FBQUEsQ0FBWXdDLEVBQVVDLEdBQ3BCbkMsS0FBS29DLGVBQWlCRixFQUFTRyxjQUMvQnJDLEtBQUtzQyxzQkFBd0JKLEVBQVNLLHFCQUN0Q3ZDLEtBQUt3QyxxQkFBdUJOLEVBQVNPLG9CQUNyQ3pDLEtBQUswQyxpQkFBbUJSLEVBQVNTLGdCQUNqQzNDLEtBQUs0QyxZQUFjVixFQUFTVyxXQUM1QjdDLEtBQUs4QyxNQUFRWCxDQUNmLENBQ0FZLGVBQUFBLENBQWdCQyxHQUNkLE1BQU1DLEVBQWlCakQsS0FBSzhDLE1BQU1wQixjQUFlLElBQUdzQixFQUFRRSxZQUM1REYsRUFBUTdCLFVBQVVDLElBQUlwQixLQUFLMEMsa0JBQzNCTyxFQUFlbkIsWUFBY2tCLEVBQVFHLGtCQUNyQ0YsRUFBZTlCLFVBQVVDLElBQUlwQixLQUFLNEMsWUFDcEMsQ0FFQVEsZUFBQUEsQ0FBZ0JKLEdBQ2QsTUFBTUMsRUFBaUJqRCxLQUFLOEMsTUFBTXBCLGNBQWUsSUFBR3NCLEVBQVFFLFlBQzVERixFQUFRN0IsVUFBVUUsT0FBT3JCLEtBQUswQyxrQkFDOUJPLEVBQWVuQixZQUFjLEdBQzdCbUIsRUFBZTlCLFVBQVVFLE9BQU9yQixLQUFLNEMsWUFDdkMsQ0FFQVMsbUJBQUFBLENBQW9CTCxHQUNsQixJQUFLQSxFQUFRTSxTQUFTQyxNQUNwQixPQUFPdkQsS0FBSytDLGdCQUFnQkMsR0FFOUJoRCxLQUFLb0QsZ0JBQWdCSixFQUN2QixDQUVBUSxnQkFBQUEsQ0FBaUJDLEdBQ2YsT0FBUUEsRUFBVUMsT0FBT1YsR0FBWUEsRUFBUU0sU0FBU0MsT0FDeEQsQ0FFQUksYUFBQUEsR0FDRTNELEtBQUs0RCxXQUFXekMsVUFBVUUsT0FBT3JCLEtBQUt3QyxzQkFDdEN4QyxLQUFLNEQsV0FBV0MsVUFBVyxDQUM3QixDQUVBQyxhQUFBQSxHQUNFOUQsS0FBSzRELFdBQVd6QyxVQUFVQyxJQUFJcEIsS0FBS3dDLHNCQUNuQ3hDLEtBQUs0RCxXQUFXQyxVQUFXLENBQzdCLENBRUFFLGtCQUFBQSxHQUNNL0QsS0FBS3dELGlCQUFpQnhELEtBQUtnRSxXQUM3QmhFLEtBQUs4RCxnQkFHUDlELEtBQUsyRCxlQUNQLENBRUFNLGVBQUFBLEdBQ0VqRSxLQUFLZ0UsVUFBVUUsU0FBU2xCLElBQ3RCaEQsS0FBS29ELGdCQUFnQkosRUFBUSxJQUUvQmhELEtBQUsyRCxlQUNQLENBRUFRLGlCQUFBQSxHQUNFbkUsS0FBS2dFLFVBQVksSUFBSWhFLEtBQUs4QyxNQUFNc0IsaUJBQWlCcEUsS0FBS29DLGlCQUN0RHBDLEtBQUs0RCxXQUFhNUQsS0FBSzhDLE1BQU1wQixjQUFjMUIsS0FBS3NDLHVCQUVoRHRDLEtBQUtnRSxVQUFVRSxTQUFTbEIsSUFDdEJBLEVBQVFsQyxpQkFBaUIsU0FBUyxLQUNoQ2QsS0FBS3FELG9CQUFvQkwsR0FDekJoRCxLQUFLK0Qsb0JBQW9CLEdBQ3pCLEdBRU4sQ0FFQU0sZ0JBQUFBLEdBQ0VyRSxLQUFLOEMsTUFBTWhDLGlCQUFpQixVQUFXd0QsSUFDckNBLEVBQUVDLGVBQWVELEVBQUUsSUFFckJ0RSxLQUFLbUUsbUJBQ1AsRUM1RWEsTUFBTUssRUFDbkI5RSxXQUFBQSxDQUFXK0UsRUFBc0JDLEdBQW1CLElBQXhDLE1BQUVDLEVBQUssU0FBRUMsR0FBVUgsRUFDN0J6RSxLQUFLNkUsT0FBU0YsRUFDZDNFLEtBQUs4RSxVQUFZRixFQUNqQjVFLEtBQUsrRSxXQUFhdEQsU0FBU0MsY0FBY2dELEVBQzNDLENBRUFNLFdBQUFBLEdBQ0VoRixLQUFLNkUsT0FBT1gsU0FBU2UsSUFDbkIsTUFBTUMsRUFBVWxGLEtBQUs4RSxVQUFVRyxHQUMvQmpGLEtBQUttRixRQUFRRCxFQUFRLEdBRXpCLENBRUFDLE9BQUFBLENBQVFELEdBQ05sRixLQUFLK0UsV0FBV0ssUUFBUUYsRUFDMUIsRUNoQmEsTUFBTUcsRUFDbkIzRixXQUFBQSxDQUFZNEYsR0FDVnRGLEtBQUt1RixjQUFnQjlELFNBQVNDLGNBQWM0RCxHQUM1Q3RGLEtBQUt3RixnQkFBa0J4RixLQUFLd0YsZ0JBQWdCQyxLQUFLekYsTUFDakRBLEtBQUswRixhQUFlMUYsS0FBS3VGLGNBQWM3RCxjQUNyQyx1QkFFSixDQUVBaUUsSUFBQUEsR0FDRTNGLEtBQUt1RixjQUFjcEUsVUFBVUMsSUFBSSxjQUNqQ0ssU0FBU1gsaUJBQWlCLFVBQVdkLEtBQUt3RixnQkFDNUMsQ0FFQUksS0FBQUEsR0FDRTVGLEtBQUt1RixjQUFjcEUsVUFBVUUsT0FBTyxjQUNwQ0ksU0FBU29FLG9CQUFvQixVQUFXN0YsS0FBS3dGLGdCQUMvQyxDQUVBQSxlQUFBQSxDQUFnQmxCLEdBQ0EsV0FBVkEsRUFBRXdCLEtBQ0o5RixLQUFLNEYsT0FFVCxDQUVBekIsaUJBQUFBLEdBQ0VuRSxLQUFLMEYsYUFBYTVFLGlCQUFpQixTQUFTLEtBQzFDZCxLQUFLNEYsT0FBTyxJQUdkNUYsS0FBS3VGLGNBQWN6RSxpQkFBaUIsU0FBVXdELElBQ3hDQSxFQUFFeUIsU0FBVy9GLEtBQUt1RixlQUNwQnZGLEtBQUs0RixPQUNQLEdBRUosRUNqQ2EsTUFBTUksVUFBc0JYLEVBQ3pDM0YsV0FBQUEsQ0FBWTRGLEVBQWVXLEdBQ3pCQyxNQUFNWixHQUNOdEYsS0FBS21HLFdBQWFuRyxLQUFLdUYsY0FBYzdELGNBQWMsZ0JBQ25EMUIsS0FBS29HLGtCQUFvQkgsRUFDekJqRyxLQUFLcUcsV0FBYXJHLEtBQUttRyxXQUFXL0IsaUJBQWlCLHNCQUNuRHBFLEtBQUtzRyxjQUFnQnRHLEtBQUttRyxXQUFXekUsY0FBYyxzQkFDckQsQ0FFQTZFLGVBQUFBLEdBS0UsT0FKQXZHLEtBQUt3RyxZQUFjLENBQUMsRUFDcEJ4RyxLQUFLcUcsV0FBV25DLFNBQVN1QyxJQUN2QnpHLEtBQUt3RyxZQUFZQyxFQUFNdkcsTUFBUXVHLEVBQU1DLEtBQUssSUFFckMxRyxLQUFLd0csV0FDZCxDQUVBckMsaUJBQUFBLEdBQ0UrQixNQUFNL0Isb0JBQ05uRSxLQUFLbUcsV0FBV3JGLGlCQUFpQixVQUFXNkYsSUFDMUNBLEVBQUlwQyxpQkFDSnZFLEtBQUtvRyxrQkFBa0JwRyxLQUFLdUcsa0JBQWtCLEdBRWxELENBRUFLLEtBQUFBLEdBQ001RyxLQUFLbUcsWUFDUG5HLEtBQUttRyxXQUFXUyxPQUVwQixDQUVBQyxtQkFBQUEsQ0FBb0JDLEdBQ2xCOUcsS0FBS3NHLGNBQWN4RSxZQUFjZ0YsQ0FDbkMsRUNsQ0ssTUFBTTVFLEVBQVcsQ0FDdEI2RSxhQUFjLGVBQ2QxRSxjQUFlLHFCQUNmRSxxQkFBc0Isc0JBQ3RCRSxvQkFBcUIsOEJBQ3JCRSxnQkFBaUIsK0JBQ2pCRSxXQUFZLG1DQ0tSbUUsRUFBTSxJQ1pHLE1BQ2J0SCxXQUFBQSxDQUFXK0UsR0FBdUIsSUFBdEIsUUFBRXdDLEVBQU8sUUFBRUMsR0FBU3pDLEVBQzlCekUsS0FBS21ILFNBQVdGLEVBQ2hCakgsS0FBS29ILFNBQVdGLENBQ2xCLENBRUFHLGFBQUFBLENBQWNDLEdBQ1osT0FBSUEsRUFBSUMsR0FDQ0QsRUFBSUUsT0FFTkMsUUFBUUMsT0FBUSxVQUFTSixFQUFJSyxTQUN0QyxDQUVBQyxlQUFBQSxHQUNFLE9BQU9DLE1BQU8sR0FBRTdILEtBQUttSCxpQkFBa0IsQ0FDckNXLE9BQVEsTUFDUlosUUFBU2xILEtBQUtvSCxXQUNiVyxLQUFLL0gsS0FBS3FILGNBQ2YsQ0FFQVcsV0FBQUEsR0FDRSxPQUFPSCxNQUFPLEdBQUU3SCxLQUFLbUgsb0JBQXFCLENBQ3hDVyxPQUFRLE1BQ1JaLFFBQVNsSCxLQUFLb0gsV0FDYlcsS0FBSy9ILEtBQUtxSCxjQUNmLENBRUFZLFdBQUFBLENBQVlYLEdBQ1YsT0FBT08sTUFBTyxHQUFFN0gsS0FBS21ILG9CQUFxQixDQUN4Q1csT0FBUSxRQUNSWixRQUFTbEgsS0FBS29ILFNBQ2RjLEtBQU1DLEtBQUtDLFVBQVUsQ0FBRWxJLEtBQU1vSCxFQUFJcEgsS0FBTW1JLE1BQU9mLEVBQUllLFVBQ2pETixLQUFLL0gsS0FBS3FILGNBQ2YsQ0FFQWlCLE9BQUFBLENBQU9DLEdBQWlCLElBQWhCLEtBQUVySSxFQUFJLEtBQUVFLEdBQU1tSSxFQUNwQixPQUFPVixNQUFPLEdBQUU3SCxLQUFLbUgsaUJBQWtCLENBQ3JDVyxPQUFRLE9BQ1JaLFFBQVNsSCxLQUFLb0gsU0FDZGMsS0FBTUMsS0FBS0MsVUFBVSxDQUFFbEksT0FBTUUsV0FDNUIySCxLQUFLL0gsS0FBS3FILGNBQ2YsQ0FFQW1CLFdBQUFBLENBQVlDLEdBQ1YsT0FBT1osTUFBTyxHQUFFN0gsS0FBS21ILGtCQUFrQnNCLElBQVUsQ0FDL0NYLE9BQVEsU0FDUlosUUFBU2xILEtBQUtvSCxXQUNiVyxLQUFLL0gsS0FBS3FILGNBQ2YsQ0FFQXFCLGdCQUFBQSxDQUFpQkMsR0FDZixPQUFPZCxNQUFPLEdBQUU3SCxLQUFLbUgsMkJBQTRCLENBQy9DVyxPQUFRLFFBQ1JaLFFBQVNsSCxLQUFLb0gsU0FDZGMsS0FBTUMsS0FBS0MsVUFBVSxDQUFFUSxPQUFRRCxFQUFZdkksU0FDMUMySCxLQUFLL0gsS0FBS3FILGNBQ2YsQ0FFQXdCLFFBQUFBLENBQVNDLEdBQ1AsT0FBT2pCLE1BQU8sR0FBRTdILEtBQUttSCxrQkFBa0IyQixVQUFnQixDQUNyRGhCLE9BQVEsTUFDUlosUUFBU2xILEtBQUtvSCxXQUNiVyxLQUFLL0gsS0FBS3FILGNBQ2YsQ0FFQTBCLFdBQUFBLENBQVlELEdBQ1YsT0FBT2pCLE1BQU8sR0FBRTdILEtBQUttSCxrQkFBa0IyQixVQUFnQixDQUNyRGhCLE9BQVEsU0FDUlosUUFBU2xILEtBQUtvSCxXQUNiVyxLQUFLL0gsS0FBS3FILGNBQ2YsR0QxRGtCLENBQ2xCSixRQUFTLGtEQUNUQyxRQUFTLENBQ1A4QixjQUFlLHVDQUNmLGVBQWdCLHNCQUtkQyxFQUFpQnhILFNBQVNDLGNBQWMscUJBQ3hDd0gsRUFBb0J6SCxTQUFTQyxjQUFjLHdCQUMzQ3lILEVBQWtCMUgsU0FBUzJILE1BQU0sZ0JBQ2pDQyxFQUEwQjVILFNBQVNDLGNBQ3ZDLDhCQUlJNEgsRUFBa0I3SCxTQUFTQyxjQUFjLG9CQUN6QzZILEVBQWE5SCxTQUFTMkgsTUFBTSxzQkFHNUJJLEVBQWUvSCxTQUFTQyxjQUFjLG1CQUN0QytILEVBQWVoSSxTQUFTMkgsTUFBTSxrQkFHcEMsU0FBU3ZKLEVBQWlCNkosR0FDeEJDLEVBQWtCaEUsS0FBSytELEVBQ3pCLENBR0EsTUFBTUUsRUFBd0IsSUFBSTNILEVBQWNDLEVBQVVpSCxHQUNwRFUsRUFBcUIsSUFBSTVILEVBQWNDLEVBQVV1SCxHQUNqREssRUFBbUIsSUFBSTdILEVBQWNDLEVBQVVxSCxHQUcvQ1EsRUFBbUIsSUFBSS9ELEVBQzNCLHVCQXNHRixTQUFpQzJDLEdBQy9Cb0IsRUFBaUJsRCxvQkFBb0IsYUFFaEM4QixFQUFZekksTUFBU3lJLEVBQVlOLE1BS3RDckIsRUFDR2lCLFlBQVksQ0FDWC9ILEtBQU15SSxFQUFZekksS0FDbEJtSSxNQUFPTSxFQUFZTixRQUVwQk4sTUFBS3RELElBQXFCLElBQXBCLEtBQUV2RSxFQUFJLE1BQUVtSSxHQUFPNUQsRUFDcEJ1RixFQUFTQyxZQUFZLENBQ25CL0osS0FBTUEsRUFDTm1JLE1BQU9BLElBRVQwQixFQUFpQm5FLE9BQU8sSUFFekJzRSxPQUFPQyxJQUNOQyxRQUFRQyxNQUFNLDRCQUE2QkYsRUFBSSxJQUVoREcsU0FBUSxLQUNQUCxFQUFpQmxELG9CQUFvQixPQUFPLElBcEI5Q3VELFFBQVFDLE1BQU0sZ0NBc0JsQixJQTdITUUsRUFBZ0IsSUFBSXZFLEVBQ3hCLHFCQW1KRixTQUE4QjJDLEdBQzVCNEIsRUFBYzFELG9CQUFvQixhQUVsQ0csRUFDR3NCLFFBQVEsQ0FBRXBJLEtBQU15SSxFQUFZekksS0FBTUUsS0FBTXVJLEVBQVl2SSxPQUNwRDJILE1BQUtRLElBQXlCLElBQXhCLEtBQUVySSxFQUFJLEtBQUVFLEVBQUksSUFBRUMsR0FBS2tJLEVBQ3hCaUMsRUFBUXJGLFFBQVFzRixFQUFlLENBQUV2SyxPQUFNRSxPQUFNQyxTQUM3Q2tLLEVBQWMzRSxRQUVkMkUsRUFBYzNELE9BQU8sSUFFdEJzRCxPQUFPQyxJQUNOQyxRQUFRQyxNQUFNLDBCQUEyQkYsRUFBSSxJQUU5Q0csU0FBUSxLQUNQQyxFQUFjMUQsb0JBQW9CLE9BQU8sR0FFL0MsSUFqS002RCxFQUFxQixJQUFJMUUsRUFDN0Isd0JBMkhGLFNBQWtDMkMsR0FDaEMrQixFQUFtQjdELG9CQUFvQixhQUV2Q0csRUFDRzBCLGlCQUFpQkMsR0FDakJaLE1BQU1ULElBQ0wwQyxFQUFTVyxjQUFjckQsR0FDdkJvRCxFQUFtQjlELFFBQ25COEQsRUFBbUI5RSxRQUNuQndFLFFBQVFRLElBQUksV0FBWXRELEVBQUksSUFFN0I0QyxPQUFPQyxJQUNOQyxRQUFRQyxNQUFNLGlDQUFrQ0YsRUFBSSxJQUVyREcsU0FBUSxLQUNQSSxFQUFtQjdELG9CQUFvQixPQUFPLEdBRXBELElBeklNOEMsRUFBb0IsSUV6RFgsY0FBNkJ0RSxFQUMxQzNGLFdBQUFBLENBQVk0RixHQUNWWSxNQUFNWixHQUNOdEYsS0FBSzZLLGNBQWdCN0ssS0FBS3VGLGNBQWM3RCxjQUN0Qyx5QkFFRjFCLEtBQUs4SyxjQUFnQjlLLEtBQUt1RixjQUFjN0QsY0FDdEMsd0JBRUosQ0FFQWlFLElBQUFBLENBQUsrRCxHQUNIMUosS0FBSzZLLGNBQWM5SSxJQUFNMkgsRUFBVXRKLEtBQ25DSixLQUFLNkssY0FBYzdJLElBQU0wSCxFQUFVeEosS0FDbkNGLEtBQUs4SyxjQUFjaEosWUFBYzRILEVBQVV4SixLQUMzQ2dHLE1BQU1QLE1BQ1IsR0Z5QzJDLHlCQUN2Q29GLEVBQW1CLElHM0RWLGNBQW9DMUYsRUFDakQzRixXQUFBQSxDQUFZNEYsRUFBZVcsR0FDekJDLE1BQU1aLEdBQ050RixLQUFLbUcsV0FBYW5HLEtBQUt1RixjQUFjN0QsY0FBYyxnQkFDbkQxQixLQUFLc0csY0FBZ0J0RyxLQUFLbUcsV0FBV3pFLGNBQWMsdUJBQ25EMUIsS0FBS29HLGtCQUFvQkgsQ0FDM0IsQ0FFQStFLGdCQUFBQSxDQUFpQkMsR0FDZmpMLEtBQUtvRyxrQkFBb0I2RSxDQUMzQixDQUVBcEUsbUJBQUFBLENBQW9CQyxHQUNsQjlHLEtBQUtzRyxjQUFjeEUsWUFBY2dGLENBQ25DLENBRUEzQyxpQkFBQUEsR0FDRStCLE1BQU0vQixvQkFFTm5FLEtBQUttRyxXQUFXckYsaUJBQWlCLFVBQVc2RixJQUMxQ0EsRUFBSXBDLGlCQUNKdkUsS0FBS29HLG1CQUFtQixHQUU1QixHSHFDQSx1QkFDQXRHLEdBZ0JGLFNBQVNBLEVBQWtCb0wsR0FDekJILEVBQWlCcEYsT0FFakJvRixFQUFpQkMsa0JBQWlCLEtBQ2hDRCxFQUFpQmxFLG9CQUFvQixlQUVyQ0csRUFDR3dCLFlBQVkwQyxFQUFLN0ssS0FDakIwSCxNQUFLLEtBQ0ptRCxFQUFLNUosbUJBQ0x5SixFQUFpQm5GLE9BQU8sSUFFekJzRSxPQUFPQyxJQUNOQyxRQUFRQyxNQUFNLHdCQUF5QkYsRUFBSSxJQUU1Q0csU0FBUSxLQUNQUyxFQUFpQmxFLG9CQUFvQixTQUFTLEdBQzlDLEdBRVIsQ0FHQSxTQUFTNEQsRUFBZVUsR0FRdEIsT0FQYSxJQUFJMUwsRUFDZjBMLEVBQ0EsaUJBQ0F0TCxFQUNBQyxFQUNBc0wsR0FFVTVKLFNBQ2QsQ0FHQSxJQUFJZ0osRUE5Q0pULEVBQWlCNUYsb0JBQ2pCd0YsRUFBa0J4RixvQkFDbEJ1RyxFQUFtQnZHLG9CQUNuQm9HLEVBQWNwRyxvQkFHZDRHLEVBQWlCNUcsb0JBQ2pCMkYsRUFBaUJ6RixtQkFDakJ1RixFQUFzQnZGLG1CQUN0QndGLEVBQW1CeEYsbUJBc0NuQjJDLEVBQ0dZLGtCQUNBRyxNQUFNcEQsSUFDTDZGLEVBQVUsSUFBSWhHLEVBQ1osQ0FDRUcsTUFBT0EsRUFDUEMsU0FBV3VHLEdBQ1dWLEVBQWVVLElBSXZDLGdCQUVGWCxFQUFReEYsYUFBYSxJQUV0QmtGLE9BQU9DLEdBQVFDLFFBQVFDLE1BQU1GLEtBR2hDLE1BQU1ILEVBQVcsSUluSUYsTUFDYnRLLFdBQUFBLENBQVcrRSxHQUE2QyxJQUE1QyxZQUFFNEcsRUFBVyxXQUFFQyxFQUFVLGNBQUVDLEdBQWU5RyxFQUNwRHpFLEtBQUt3TCxhQUFlL0osU0FBU0MsY0FBYzJKLEdBQzNDckwsS0FBS3lMLFlBQWNoSyxTQUFTQyxjQUFjNEosR0FDMUN0TCxLQUFLMEwsZUFBaUJqSyxTQUFTQyxjQUFjNkosRUFDL0MsQ0FFQXZELFdBQUFBLEdBQ0UsTUFBTyxDQUNMOUgsS0FBTUYsS0FBS3dMLGFBQWExSixZQUN4QnVHLE1BQU9ySSxLQUFLeUwsWUFBWTNKLFlBRTVCLENBRUFtSSxXQUFBQSxDQUFXMUIsR0FBa0IsSUFBakIsS0FBRXJJLEVBQUksTUFBRW1JLEdBQU9FLEVBQ3pCdkksS0FBS3dMLGFBQWExSixZQUFjNUIsRUFDaENGLEtBQUt5TCxZQUFZM0osWUFBY3VHLENBQ2pDLENBRUFzQyxhQUFBQSxDQUFhZ0IsR0FBYSxJQUFaLE9BQUUvQyxHQUFRK0MsRUFDdEIzTCxLQUFLMEwsZUFBZTNKLElBQU02RyxDQUM1QixHSjhHNEIsQ0FDNUJ5QyxZQUFhLGtCQUNiQyxXQUFZLHdCQUNaQyxjQUFlLG9CQXFGakIsU0FBU0gsRUFBZ0JGLEdBQ25CQSxFQUFLM0ssU0FDUHlHLEVBQ0crQixZQUFZbUMsRUFBSzdLLEtBQ2pCMEgsTUFBSyxLQUNKbUQsRUFBS2pLLFlBQVcsRUFBTSxJQUV2QmlKLE9BQU9HLEdBQVVELFFBQVFDLE1BQU0sZ0NBQWlDQSxLQUVoRWEsRUFBSzNLLFNBQ1J5RyxFQUNHNkIsU0FBU3FDLEVBQUs3SyxLQUNkMEgsTUFBSyxLQUNKbUQsRUFBS2pLLFlBQVcsRUFBSyxJQUV0QmlKLE9BQU9HLEdBQVVELFFBQVFDLE1BQU0sOEJBQStCQSxJQUVyRSxDQWxHQXJELEVBQ0dnQixjQUNBRCxNQUFNNkQsSUFDTDVCLEVBQVNDLFlBQVksQ0FDbkIvSixLQUFNMEwsRUFBWTFMLEtBQ2xCbUksTUFBT3VELEVBQVl2RCxRQUVyQjJCLEVBQVNXLGNBQWMsQ0FBRS9CLE9BQVFnRCxFQUFZaEQsUUFBUyxJQUV2RHNCLE9BQU9DLEdBQVFDLFFBQVFDLE1BQU1GLEtBNEZoQ2xCLEVBQWVuSSxpQkFBaUIsU0FBUyxLQUN2QyxNQUFNK0ssRUFBYzdCLEVBQVNoQyxjQUM3QmtCLEVBQWtCeEMsTUFBUW1GLEVBQVkzTCxNQUFRLEdBQzlDbUosRUFBd0IzQyxNQUFRbUYsRUFBWXhELE9BQVMsR0FDckR1QixFQUFzQjNGLGtCQUN0QjhGLEVBQWlCcEUsTUFBTSxJQUl6QjZELEVBQWExSSxpQkFBaUIsU0FBUyxLQUNyQ3lKLEVBQWM1RSxNQUFNLElBSXRCMkQsRUFBZ0J4SSxpQkFBaUIsU0FBUyxLQUN4QzRKLEVBQW1CL0UsTUFBTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBkYXRhLFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxyXG4gICAgaGFuZGxlTGlrZUNsaWNrXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gZGF0YS5pc0xpa2VkO1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VJY29uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHtcclxuICAgICAgICBuYW1lOiB0aGlzLl9uYW1lLFxyXG4gICAgICAgIGxpbms6IHRoaXMuX2xpbmssXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIHNldElzTGlrZWQoaXNMaWtlZCkge1xyXG4gICAgdGhpcy5pc0xpa2VkID0gaXNMaWtlZDtcclxuICAgIHRoaXMucmVuZGVyTGlrZXMoKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckxpa2VzKCkge1xyXG4gICAgaWYgKHRoaXMuaXNMaWtlZCkge1xyXG4gICAgICB0aGlzLl9saWtlSWNvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fcmVhY3QtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2xpa2VJY29uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19yZWFjdC1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hbHQgPSBcIlBob3RvIG9mIFwiICsgdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2xpa2VJY29uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19yZWFjdC1idXR0b25cIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdG4gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XHJcblxyXG4gICAgdGhpcy5yZW5kZXJMaWtlcygpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsKSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbDtcbiAgfVxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH1cbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XG4gICAgcmV0dXJuICFpbnB1dExpc3QuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cbiAgX2VuYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdG4uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGRpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnRuLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0RWxzKSkge1xuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH0pO1xuICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRFbHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcbiAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KGUpO1xuICAgIH0pO1xuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7IC8vZGF0YVxyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjsgLy9mdW5jdGlvblxyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICB0aGlzLmFkZEl0ZW0oZWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCJcbiAgICApO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5cIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShlKSB7XG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGlmIChlLnRhcmdldCA9PT0gdGhpcy5fcG9wdXBFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19mb3JtLWlucHV0XCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3NhdmUtYnV0dG9uXCIpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZXNldCgpIHtcclxuICAgIGlmICh0aGlzLl9wb3B1cEZvcm0pIHtcclxuICAgICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXRCdXR0b25UZXh0KHRleHQpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRleHQ7XHJcbiAgfVxyXG59XHJcbiIsIi8qIEZvcm0gVmFsaWRhdGlvbiBTZXR0aW5ncyAmIFZhciAqL1xyXG5leHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtLWlucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3NhdmUtYnV0dG9uLWRpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19mb3JtX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19mb3JtLWlucHV0LWVycm9yLXZpc2libGVcIixcclxufTtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjY5N2ZkMTgzLTlhODItNDUyMi05Mjk0LWIwMWMxMmMzMmE1OVwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG4vKiBQcm9maWxlIFZhcmlhYmxlcyAqL1xyXG5jb25zdCBwcm9maWxlRWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ0blwiKTtcclxuY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IGRvY3VtZW50LmZvcm1zW1wicHJvZmlsZS1mb3JtXCJdO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXHJcbik7XHJcblxyXG4vKiBBdmF0YXIgVmFyaWFibGVzICovXHJcbmNvbnN0IHVwZGF0ZUF2YXRhckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyLXNhdmUtYnRuXCIpO1xyXG5jb25zdCBhdmF0YXJGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJ1cGRhdGUtYXZhdGFyLWZvcm1cIl07XHJcblxyXG4vKiBBZGQgUGxhY2UgVmFyaWFibGVzICovXHJcbmNvbnN0IHBsYWNlc0FkZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGxhY2VzLWFkZC1idG5cIik7XHJcbmNvbnN0IHBsYWNlQWRkRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiYWRkLXBsYWNlLWZvcm1cIl07XHJcblxyXG4vKiBJbWFnZSBDbGljayBQcmV2aWV3IEZ1bmN0aW9uICovXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soaW1hZ2VEYXRhKSB7XHJcbiAgaW1hZ2VQcmV2aWV3TW9kYWwub3BlbihpbWFnZURhdGEpO1xyXG59XHJcblxyXG4vKiBWYWxpZGF0aW9uICovXHJcbmNvbnN0IHByb2ZpbGVFZGl0VmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBwcm9maWxlRWRpdEZvcm0pO1xyXG5jb25zdCBhZGRQbGFjZVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgcGxhY2VBZGRGb3JtKTtcclxuY29uc3QgYXZhdGFyVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBhdmF0YXJGb3JtKTtcclxuXHJcbi8qIE1vZGFscyAqL1xyXG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXHJcbiAgaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXRcclxuKTtcclxuY29uc3QgYWRkUGxhY2VNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3BsYWNlcy1hZGQtbW9kYWxcIixcclxuICBoYW5kbGVOZXdQbGFjZVN1Ym1pdFxyXG4pO1xyXG5jb25zdCB1cGRhdGVQcm9maWxlSW1hZ2UgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNhdmF0YXItdXBkYXRlLW1vZGFsXCIsXHJcbiAgaGFuZGxlUHJvZmlsZUltYWdlU3VibWl0XHJcbik7XHJcbmNvbnN0IGltYWdlUHJldmlld01vZGFsID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3BsYWNlcy1wcmV2aWV3LW1vZGFsXCIpO1xyXG5jb25zdCBkZWxldGVQbGFjZU1vZGFsID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcclxuICBcIiNwbGFjZXMtZGVsZXRlLW1vZGFsXCIsXHJcbiAgaGFuZGxlRGVsZXRlQ2xpY2tcclxuKTtcclxuXHJcbi8qIEV2ZW50IExpc3RlbmVycyAqL1xyXG5lZGl0UHJvZmlsZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmltYWdlUHJldmlld01vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnVwZGF0ZVByb2ZpbGVJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hZGRQbGFjZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vKiBGb3JtIFZhbGlkYXRpb24gKi9cclxuZGVsZXRlUGxhY2VNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hdmF0YXJWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxucHJvZmlsZUVkaXRWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkUGxhY2VWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8qIERFTEVURSBQbGFjZSBGdW5jdGlvbiAqL1xyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDbGljayhjYXJkKSB7XHJcbiAgZGVsZXRlUGxhY2VNb2RhbC5vcGVuKCk7XHJcblxyXG4gIGRlbGV0ZVBsYWNlTW9kYWwuc2V0U3VibWl0SGFuZGxlcigoKSA9PiB7XHJcbiAgICBkZWxldGVQbGFjZU1vZGFsLnNldFN1Ym1pdEJ1dHRvblRleHQoXCJEZWxldGluZy4uLlwiKTtcclxuXHJcbiAgICBhcGlcclxuICAgICAgLnJlbW92ZVBsYWNlKGNhcmQuX2lkKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY2FyZC5oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICAgICAgZGVsZXRlUGxhY2VNb2RhbC5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkZWxldGluZyBwbGFjZTpcIiwgZXJyKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIGRlbGV0ZVBsYWNlTW9kYWwuc2V0U3VibWl0QnV0dG9uVGV4dChcIkRlbGV0ZVwiKTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qIENyZWF0ZSBDYXJkcyAqL1xyXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChjYXJkRGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIGNhcmREYXRhLFxyXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxyXG4gICAgaGFuZGxlTGlrZVJlYWN0XHJcbiAgKTtcclxuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XHJcbn1cclxuXHJcbi8qIEdFVCBDYXJkcyAqL1xyXG5sZXQgc2VjdGlvbjtcclxuYXBpXHJcbiAgLmdldEluaXRpYWxDYXJkcygpXHJcbiAgLnRoZW4oKGl0ZW1zKSA9PiB7XHJcbiAgICBzZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgICAgIHtcclxuICAgICAgICBpdGVtczogaXRlbXMsXHJcbiAgICAgICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChjYXJkRGF0YSk7XHJcbiAgICAgICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgXCIuY2FyZHNfX2xpc3RcIlxyXG4gICAgKTtcclxuICAgIHNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG5cclxuLyogdXNlciBpbmZvIGluc3RhbmNlICovXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBwcm9maWxlTmFtZTogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICBwcm9maWxlSm9iOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG4gIHByb2ZpbGVBdmF0YXI6IFwiLnByb2ZpbGVfX2ltYWdlXCIsXHJcbn0pO1xyXG5cclxuLyogR0VUIFVzZXIgSW5mbyAqL1xyXG5hcGlcclxuICAuZ2V0VXNlckluZm8oKVxyXG4gIC50aGVuKChwcm9maWxlRGF0YSkgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgICBuYW1lOiBwcm9maWxlRGF0YS5uYW1lLFxyXG4gICAgICBhYm91dDogcHJvZmlsZURhdGEuYWJvdXQsXHJcbiAgICB9KTtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIoeyBhdmF0YXI6IHByb2ZpbGVEYXRhLmF2YXRhciB9KTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG5cclxuLyogUEFUQ0ggUHJvZmlsZSBFZGl0IEZ1bmN0aW9uICovXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KGlucHV0VmFsdWVzKSB7XHJcbiAgZWRpdFByb2ZpbGVNb2RhbC5zZXRTdWJtaXRCdXR0b25UZXh0KFwiU2F2aW5nLi4uXCIpO1xyXG5cclxuICBpZiAoIWlucHV0VmFsdWVzLm5hbWUgfHwgIWlucHV0VmFsdWVzLmFib3V0KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiUGxlYXNlIGZpbGwgaW4gYWxsIHRoZSBmaWVsZHNcIik7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBhcGlcclxuICAgIC5lZGl0UHJvZmlsZSh7XHJcbiAgICAgIG5hbWU6IGlucHV0VmFsdWVzLm5hbWUsXHJcbiAgICAgIGFib3V0OiBpbnB1dFZhbHVlcy5hYm91dCxcclxuICAgIH0pXHJcbiAgICAudGhlbigoeyBuYW1lLCBhYm91dCB9KSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGFib3V0OiBhYm91dCxcclxuICAgICAgfSk7XHJcbiAgICAgIGVkaXRQcm9maWxlTW9kYWwuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgdXNlciBpbmZvOlwiLCBlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgZWRpdFByb2ZpbGVNb2RhbC5zZXRTdWJtaXRCdXR0b25UZXh0KFwiU2F2ZVwiKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKiBQQVRDSCBQcm9maWxlIEF2YXRhciBGdW5jdGlvbiAqL1xyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlSW1hZ2VTdWJtaXQoaW5wdXRWYWx1ZXMpIHtcclxuICB1cGRhdGVQcm9maWxlSW1hZ2Uuc2V0U3VibWl0QnV0dG9uVGV4dChcIlNhdmluZy4uLlwiKTtcclxuXHJcbiAgYXBpXHJcbiAgICAuZWRpdFByb2ZpbGVJbWFnZShpbnB1dFZhbHVlcylcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihyZXMpO1xyXG4gICAgICB1cGRhdGVQcm9maWxlSW1hZ2UucmVzZXQoKTtcclxuICAgICAgdXBkYXRlUHJvZmlsZUltYWdlLmNsb3NlKCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiU3VjY2VzczpcIiwgcmVzKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgcHJvZmlsZSBhdmF0YXI6XCIsIGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICB1cGRhdGVQcm9maWxlSW1hZ2Uuc2V0U3VibWl0QnV0dG9uVGV4dChcIlNhdmVcIik7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyogUE9TVCBBZGQgUGxhY2UgRnVuY3Rpb24gKi9cclxuZnVuY3Rpb24gaGFuZGxlTmV3UGxhY2VTdWJtaXQoaW5wdXRWYWx1ZXMpIHtcclxuICBhZGRQbGFjZU1vZGFsLnNldFN1Ym1pdEJ1dHRvblRleHQoXCJTYXZpbmcuLi5cIik7XHJcblxyXG4gIGFwaVxyXG4gICAgLmFkZENhcmQoeyBuYW1lOiBpbnB1dFZhbHVlcy5uYW1lLCBsaW5rOiBpbnB1dFZhbHVlcy5saW5rIH0pXHJcbiAgICAudGhlbigoeyBuYW1lLCBsaW5rLCBfaWQgfSkgPT4ge1xyXG4gICAgICBzZWN0aW9uLmFkZEl0ZW0oZ2V0Q2FyZEVsZW1lbnQoeyBuYW1lLCBsaW5rLCBfaWQgfSkpO1xyXG4gICAgICBhZGRQbGFjZU1vZGFsLmNsb3NlKCk7XHJcblxyXG4gICAgICBhZGRQbGFjZU1vZGFsLnJlc2V0KCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFkZGluZyBuZXcgcGxhY2U6XCIsIGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBhZGRQbGFjZU1vZGFsLnNldFN1Ym1pdEJ1dHRvblRleHQoXCJTYXZlXCIpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qIFBVVCBBZGQgTGlrZSBSZWFjdCAqL1xyXG5mdW5jdGlvbiBoYW5kbGVMaWtlUmVhY3QoY2FyZCkge1xyXG4gIGlmIChjYXJkLmlzTGlrZWQpIHtcclxuICAgIGFwaVxyXG4gICAgICAuZGlzbGlrZUNhcmQoY2FyZC5faWQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjYXJkLnNldElzTGlrZWQoZmFsc2UpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3IgcmVtb3ZpbmcgbGlrZSByZWFjdGlvbjpcIiwgZXJyb3IpKTtcclxuICB9XHJcbiAgaWYgKCFjYXJkLmlzTGlrZWQpIHtcclxuICAgIGFwaVxyXG4gICAgICAubGlrZUNhcmQoY2FyZC5faWQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjYXJkLnNldElzTGlrZWQodHJ1ZSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhZGRpbmcgbGlrZSByZWFjdGlvbjpcIiwgZXJyb3IpKTtcclxuICB9XHJcbn1cclxuXHJcbi8qIEVkaXQgUHJvZmlsZSBCdXR0b24gTGlzdGVuZXIgKi9cclxucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCBjdXJyZW50VXNlciA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSBjdXJyZW50VXNlci5uYW1lIHx8IFwiXCI7XHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBjdXJyZW50VXNlci5hYm91dCB8fCBcIlwiO1xyXG4gIHByb2ZpbGVFZGl0VmFsaWRhdGlvbi5yZXNldFZhbGlkYXRpb24oKTtcclxuICBlZGl0UHJvZmlsZU1vZGFsLm9wZW4oKTtcclxufSk7XHJcblxyXG4vKiBBZGQgUGxhY2UgQnV0dG9uIExpc3RlbmVyICovXHJcbnBsYWNlc0FkZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZFBsYWNlTW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbi8qUHJvZmlsZSBBdmF0YXIgQnV0dG9uIExpc3RlbmVyKi9cclxudXBkYXRlQXZhdGFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgdXBkYXRlUHJvZmlsZUltYWdlLm9wZW4oKTtcclxufSk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBjaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLmNoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGVkaXRQcm9maWxlKHJlcykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lOiByZXMubmFtZSwgYWJvdXQ6IHJlcy5hYm91dCB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lLCBsaW5rIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLmNoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlUGxhY2UoY2FyZElEKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSUR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBlZGl0UHJvZmlsZUltYWdlKGlucHV0VmFsdWVzKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXI6IGlucHV0VmFsdWVzLmxpbmsgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBsaWtlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGRpc2xpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLmNoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLm1vZGFsX19pbWFnZS1wcmV2aWV3XCJcbiAgICApO1xuICAgIHRoaXMuX3ByZXZpZXdUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIubW9kYWxfX2ltYWdlLWNhcHRpb25cIlxuICAgICk7XG4gIH1cblxuICBvcGVuKGltYWdlRGF0YSkge1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5zcmMgPSBpbWFnZURhdGEubGluaztcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UuYWx0ID0gaW1hZ2VEYXRhLm5hbWU7XG4gICAgdGhpcy5fcHJldmlld1RpdGxlLnRleHRDb250ZW50ID0gaW1hZ2VEYXRhLm5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc2F2ZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICB9XHJcblxyXG4gIHNldFN1Ym1pdEhhbmRsZXIoY2FsbGJhY2tGdW5jdGlvbikge1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGNhbGxiYWNrRnVuY3Rpb247XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXRCdXR0b25UZXh0KHRleHQpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRleHQ7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IHByb2ZpbGVOYW1lLCBwcm9maWxlSm9iLCBwcm9maWxlQXZhdGFyIH0pIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZSk7XHJcbiAgICB0aGlzLl9wcm9maWxlSm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlSm9iKTtcclxuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVBdmF0YXIpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgYWJvdXQ6IHRoaXMuX3Byb2ZpbGVKb2IudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyQXZhdGFyKHsgYXZhdGFyIH0pIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3JjID0gYXZhdGFyO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUxpa2VDbGljayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfaWQiLCJfaXNMaWtlZCIsImlzTGlrZWQiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfY2FyZFNlbGVjdG9yIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VJY29uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9kZWxldGVCdG4iLCJfY2FyZEltYWdlRWwiLCJzZXRJc0xpa2VkIiwicmVuZGVyTGlrZXMiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJoYW5kbGVEZWxldGVDYXJkIiwiX2NhcmRFbGVtZW50IiwiZ2V0VmlldyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZFRpdGxlRWwiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZUVsIiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsImlucHV0TGlzdCIsImV2ZXJ5IiwiX2VuYWJsZUJ1dHRvbiIsIl9zdWJtaXRCdG4iLCJkaXNhYmxlZCIsImRpc2FibGVCdXR0b24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaW5wdXRFbHMiLCJyZXNldFZhbGlkYXRpb24iLCJmb3JFYWNoIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIlNlY3Rpb24iLCJfcmVmIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImVsZW1lbnQiLCJhZGRJdGVtIiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiX2Nsb3NlQnV0dG9uIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRMaXN0IiwiX3N1Ym1pdEJ1dHRvbiIsIl9nZXRJbnB1dFZhbHVlcyIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsImV2dCIsInJlc2V0Iiwic2V0U3VibWl0QnV0dG9uVGV4dCIsInRleHQiLCJmb3JtU2VsZWN0b3IiLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJjaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsImdldFVzZXJJbmZvIiwiZWRpdFByb2ZpbGUiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwiYWRkQ2FyZCIsIl9yZWYyIiwicmVtb3ZlUGxhY2UiLCJjYXJkSUQiLCJlZGl0UHJvZmlsZUltYWdlIiwiaW5wdXRWYWx1ZXMiLCJhdmF0YXIiLCJsaWtlQ2FyZCIsImNhcmRJZCIsImRpc2xpa2VDYXJkIiwiYXV0aG9yaXphdGlvbiIsInByb2ZpbGVFZGl0QnRuIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRWRpdEZvcm0iLCJmb3JtcyIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwidXBkYXRlQXZhdGFyQnRuIiwiYXZhdGFyRm9ybSIsInBsYWNlc0FkZEJ0biIsInBsYWNlQWRkRm9ybSIsImltYWdlRGF0YSIsImltYWdlUHJldmlld01vZGFsIiwicHJvZmlsZUVkaXRWYWxpZGF0aW9uIiwiYWRkUGxhY2VWYWxpZGF0aW9uIiwiYXZhdGFyVmFsaWRhdGlvbiIsImVkaXRQcm9maWxlTW9kYWwiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJmaW5hbGx5IiwiYWRkUGxhY2VNb2RhbCIsInNlY3Rpb24iLCJnZXRDYXJkRWxlbWVudCIsInVwZGF0ZVByb2ZpbGVJbWFnZSIsInNldFVzZXJBdmF0YXIiLCJsb2ciLCJfcHJldmlld0ltYWdlIiwiX3ByZXZpZXdUaXRsZSIsImRlbGV0ZVBsYWNlTW9kYWwiLCJzZXRTdWJtaXRIYW5kbGVyIiwiY2FsbGJhY2tGdW5jdGlvbiIsImNhcmQiLCJjYXJkRGF0YSIsImhhbmRsZUxpa2VSZWFjdCIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUpvYiIsInByb2ZpbGVBdmF0YXIiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZUpvYiIsIl9wcm9maWxlQXZhdGFyIiwiX3JlZjMiLCJwcm9maWxlRGF0YSIsImN1cnJlbnRVc2VyIl0sInNvdXJjZVJvb3QiOiIifQ==